/* 
 * joy.js v0.0.1pre - http://joyjs.org
 * @copyright 2012-2013 Endel Dreyer 
 * @license MIT
 * @build 1/3/2013
 */
(function(t){var i=t.Joy||{Init:{},Render:{},Input:{},Context:{},Events:{UPDATE:"update"},debug:!1};t.Joy=i})(window),function(){var t=!1,i=/xyz/.test(function(){"xyz"})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){function n(){!t&&this.init&&this.init.apply(this,arguments)}var s=this.prototype;t=!0;var h=new this;t=!1;for(var o in e)h[o]="function"==typeof e[o]&&"function"==typeof s[o]&&i.test(e[o])?function(t,i){return function(){var e=this._super;this._super=s[t];var n=i.apply(this,arguments);return this._super=e,n}}(o,e[o]):e[o];return n.prototype=h,n.prototype.constructor=n,n.extend=arguments.callee,n},Joy.Object=Class}(Joy),function(t){var i=function(t,i,e,n,s,h){return null!==t&&(this.m11=t),this.m12=i||0,this.m21=e||0,null!==n&&(this.m22=n),this.dx=s||0,this.dy=h||0,this};i.prototype.appendTransform=function(t,e,n,s,h,o,r,a,c){var l,u,d;return h%360?(d=h*i.DEG_TO_RAD,l=Math.cos(d),u=Math.sin(d)):(l=1,u=0),o||r?(o*=i.DEG_TO_RAD,r*=i.DEG_TO_RAD,this.append(Math.cos(r),Math.sin(r),-Math.sin(o),Math.cos(o),t,e),this.append(l*n,u*n,-u*s,l*s,0,0)):this.append(l*n,u*n,-u*s,l*s,t,e),(a||c)&&(this.dx-=a*this.m11+c*this.m21,this.dy-=a*this.m12+c*this.m22),this},i.prototype.append=function(t,i,e,n,s,h){var o=this.m11,r=this.m12,a=this.m21,c=this.m22;return this.m11=t*o+i*a,this.m12=t*r+i*c,this.m21=e*o+n*a,this.m22=e*r+n*c,this.dx=s*o+h*a+this.dx,this.dy=s*r+h*c+this.dy,this},i.prototype.invert=function(){var t=this.m11,i=this.m12,e=this.m21,n=this.m22,s=this.dx,h=t*n-i*e;return this.m11=n/h,this.m12=-i/h,this.m21=-e/h,this.m22=t/h,this.dx=(e*this.dy-n*s)/h,this.dy=-(t*this.dy-i*s)/h,this},i.prototype.clone=function(){return new i(this.m11,this.m12,this.m21,this.m22,this.dx,this.dy)},i.prototype.identity=function(){return this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this},i.DEG_TO_RAD=Math.PI/180,i.identity=new i(1,0,0,1,0,0),t.Matrix2D=i}(Joy),function(t){var i=t.Object.extend({init:function(){this._handlers={}},bind:function(t,e){var n=e;return void 0!==i._custom.bind[t]&&(n={target:this,handler:e},i._custom.bind[t].call(this,n)),void 0===this._handlers[t]&&(this._handlers[t]=[]),-1===this._handlers[t].indexOf(n)&&this._handlers[t].push(n),this},unbind:function(t){if(void 0!==i._custom.unbind[t])for(var e=0,n=this._handlers[t].length;n>e;++e)i._custom.unbind[t].call(this,this._handlers[t][e]);return this._handlers[t]=null,this},trigger:function(t,i,e){var n=this._handlers[t]||[],s=0,h=n.length;if(i=i||[],e=e||0,h>0)for(;h>s;++s)n[s].apply(this,i)}});i._custom={bind:{},unbind:{}},i.register=function(t,e,n){return i._custom.bind[t]=e,i._custom.unbind[t]=n,this},t.Triggerable=i}(Joy),function(t){t.Composite={SOURCE_OVER:"source-over",SOURCE_IN:"source-in",SOURCE_OUT:"source-out",SOURCE_ATOP:"source-atop",LIGHTER:"lighter",XOR:"xor",DESTINATION_OVER:"destination-over",DESTINATION_IN:"destination-in",DESTINATION_OUT:"destination-out",DESTINATION_ATOP:"destination-atop",DESTINATION_COPY:"copy"}}(Joy),function(t){var i=function(t){this.setCanvas(t.canvas)};i.prototype.setCanvas=function(t){return this.canvas=t,this.ctx=t.getContext("2d"),this},i.prototype.clear=function(){return this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this},i.prototype.render=function(t){var i=t.length,e=0;for(this.clear();i>e;++e)t[e].render()},t.Context.Context2d=i}(Joy),function(t){var i=t.Triggerable.extend({init:function(i){i||(i={}),this.x=i.x||0,this.y=i.y||0,this._width=i.width||0,this._height=i.height||0,this.pivotX=i.pivotX||0,this.pivotY=i.pivotY||0,this.skewX=i.skewX||0,this.skewY=i.skewY||0,this.scaleX=i.scaleX||1,this.scaleY=i.scaleY||1,this.alpha=i.alpha||1,this.rotation=i.rotation||0,this.smooth=i.smooth||!1,this.collider=this,this.index=null,this.ctx=null,this._shadow=null,this._parent=null,this._visible=i.visible||!0,this._matrix=t.Matrix2D.identity.clone(),this._collisionTargets=[],this._hasContextOperations=!1,this._contextOperations={},this.__defineGetter__("parent",function(){return this._parent}),this.__defineGetter__("visible",function(){return this._visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY}),this.__defineSetter__("visible",function(t){this._visible=t}),this.__defineGetter__("matrix",function(){return this._matrix}),this.__defineGetter__("width",function(){return this._width*this.scaleX}),this.__defineGetter__("height",function(){return this._height*this.scaleY}),this._super()},setContext:function(t){this.ctx=t},onCollide:function(t,i){-1===this._collisionTargets.indexOf(t)&&(this._collisionTargets.push(t),this.bind("collide",i))},scale:function(t,i){return this.scaleX=t,this.scaleY=i,this},translate:function(t,i){return this._hasContextOperations=!0,this._contextOperations.translate=[t,i],this},rotate:function(t){this.rotation=t},transform:function(t,i,e,n,s,h){return this._contextOperations.transform=[t,i,e,n,s,h],this},composite:function(t){return this.compositeOperation=t,this},fillStyle:function(t){return this._hasContextOperations=!0,this._contextOperations.fillStyle=""+t,this},fillRect:function(t,i,e,n){return this._hasContextOperations=!0,this._contextOperations.fillRect=[t,i,e,n],this},shadow:function(t){return this._shadow=t?{color:t.color||"#000",offsetX:t.offsetX||0,offsetY:t.offsetY||0,blur:t.blur||1}:null,this},updateContext:function(){var i=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.pivotX,this.pivotY);this.ctx.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy),this.ctx.globalAlpha*=this.alpha,this.compositeOperation&&(this.ctx.globalCompositeOperation=this.compositeOperation),this.ctx[t.Support.imageSmoothingEnabled]=this.smooth,this._shadow&&(this.ctx.shadowColor=this._shadow.color,this.ctx.shadowOffsetX=this._shadow.offsetX,this.ctx.shadowOffsetY=this._shadow.offsetY,this.ctx.shadowBlur=this._shadow.blur)},collide:function(t){return!(this.x>=t.x+t.width||t.x>=this.x+this.width||this.y>=t.y+t.height||t.y>=this.y+this.height)},render:function(){for(var t=0,i=this._collisionTargets.length;i>t;++t)this._collisionTargets[t].collider.collide(this.collider)&&this.trigger("collide",[this._collisionTargets[t]]);if(this._hasContextOperations)for(var e in this._contextOperations)this._contextOperations[e]instanceof Array?this.ctx[e].apply(this.ctx,this._contextOperations[e]):this.ctx[e]=this._contextOperations[e]},getMatrix:function(){return this._matrix.clone()}});t.DisplayObject=i}(Joy),function(t){var i=t.DisplayObject.extend({init:function(t){if(t||(t={}),this.displayObjects=[],t.children)for(var i=0,e=t.children.length;e>i;++i)this.addChild(t.children[i]);this.__defineGetter__("numChildren",function(){return this.displayObjects.length}),this.__defineGetter__("width",function(){for(var t=0,i=0,e=this.displayObjects.length;e>i;++i)this.displayObjects[i].width>t&&(t=this.displayObjects[i].width);return t}),this.__defineGetter__("height",function(){for(var t=0,i=0,e=this.displayObjects.length;e>i;++i)this.displayObjects[i].height>t&&(t=this.displayObjects[i].height);return t}),this._super(t)},setContext:function(t){this.ctx=t;for(var i=0,e=this.displayObjects.length;e>i;++i)this.displayObjects[i].setContext(t)},render:function(){if(this.visible){var t=0,i=this.displayObjects.length;for(this.ctx.save(),this.updateContext(),this._super();i>t;++t)this.displayObjects[t].visible&&(this.ctx.save(),this.displayObjects[t].updateContext(),this.displayObjects[t].render(),this.displayObjects[t].trigger("update"),this.ctx.restore());this.ctx.restore()}},swapChildren:function(t,i){if(t.parent!==i.parent)throw Error("DisplayObject must be at same level to swap.");var e=t.index;return this.displayObjects[e]=i,this.displayObjects[i.index]=t,t.index=i.index,i.index=e,this},addChild:function(t){t.index=this.displayObjects.push(t)-1,t._parent=this},removeChild:function(t){return this.removeChildAt(t.index)},removeChildAt:function(t){return this.displayObjects.splice(t,t+1),this}});t.DisplayObjectContainer=i}(Joy),function(t){var i=t.DisplayObject.extend({init:function(t){t||(t={}),this.__defineSetter__("geom",function(t){this._geom=t}),this.__defineGetter__("geom",function(){return this._geom}),t.geom&&(this.geom=t.geom),this._super(t),this.__defineGetter__("width",function(){return this._geom.width}),this.__defineGetter__("height",function(){return this._geom.height})},render:function(){this._super(),this._geom.render(this.ctx)}});t.Shape=i}(Joy),function(t){var i=t.DisplayObjectContainer.extend({init:function(t){"string"==typeof t&&(t={src:t}),this.image=t.image||new Image,t.width=this.image.width||t.width,t.height=this.image.height||t.height,this._super(t),this._flipX=!1,this.__defineSetter__("flipX",function(t){this.scaleX*=t!=this._flipX?-1:1,this._flipX=t}),this.__defineGetter__("flipX",function(){return this._flipX}),this._flipY=!1,this.__defineSetter__("flipY",function(t){this.scaleY*=t!=this._flipY?-1:1,this._flipY=t,this._flipY&&(this.pivotY=-this._height)}),this.__defineGetter__("flipY",function(){return this._flipY}),this.bind("load",this.onLoad),t.src&&this.load(t.src),this.scale(1,1)},load:function(t){var i=this;this.image.onload=function(){i.trigger("load")},this.image.src=t},onLoad:function(){this._width||(this._width=this.image.width),this._height||(this._height=this.image.height),this.flipX=this._flipX,this.flipY=this._flipY},render:function(){this._super(),this.ctx.drawImage(this.image,0,0,this._width,this._height),t.debug&&(this.ctx.strokeStyle="red",this.ctx.strokeRect(0,0,this._width,this._height))}});t.Sprite=i}(Joy),function(t){var i=t.Sprite.extend({init:function(t){var i=this;if(this._super(t),this._animations={length:0},this._frequencyInterval=null,this.frames=1,this.currentFrame=0,this.framesPerSecond=t.framesPerSecond||t.fps||24,t.animations)for(var e in t.animations)t.animations[e]instanceof Array&&this.addAnimation(e,t.animations[e]);this._currentAnimation=null,this.__defineGetter__("currentAnimation",function(){return this._currentAnimation}),this.__defineGetter__("fps",function(){return this.framesPerSecond}),this._frequencyInterval=setInterval(function(){i._update()},1e3/this.framesPerSecond)},_update:function(){var t=this._animations[this._currentAnimation];this.currentFrame==t.lastFrame?(this.trigger("animationEnd"),this.currentFrame=t.firstFrame):this.currentFrame=this.currentFrame+1},addAnimation:function(t,i){var e=i[0],n=i[1];return this._animations[t]={firstFrame:e,lastFrame:n},this._animations.length=(this._animations.length||0)+1,this},onLoad:function(){this._super();var t=1;this._width<this.image.width&&(t=this._columns=Math.ceil(this.image.width/this._width)),this._height<this.image.height&&(t*=this._rows=Math.ceil(this.image.height/this._height)),(0===this._animations.length||null===this._currentAnimation)&&(this.addAnimation("default",[0,t-1]),this.play("default"))},play:function(t){return this._currentAnimation=t,this.currentFrame=this._animations[t].firstFrame,this},render:function(){this.ctx.drawImage(this.image,this._width*(this.currentFrame%this._columns),this._height*(this.currentFrame/this._columns>>0),this._width,this._height,0,0,this._width,this._height),t.debug&&(this.ctx.strokeStyle="red",this.ctx.strokeRect(0,0,this._width,this._height))}});t.SpriteSheet=i}(Joy),function(t){var i={TOP:"top",HANGING:"hanging",MIDDLE:"middle",ALPHABETIC:"alphabetic",IDEOGRAPHIC:"ideographic",BOTTOM:"bottom"},e="Normal 12px Verdana",n="#000000",s="left",h=i.TOP,o=t.DisplayObject.extend({init:function(t){t===void 0&&(t={}),this._super(t),this.text=t.text||"",this.font=t.font||e,this.align=t.align||s,this.baseline=t.baseline||h,this._color=t.color||n,this.__defineGetter__("color",function(){return this._color}),this.__defineSetter__("color",function(t){this._color=""+t}),t.stroke?this.useStroke():this.useFill()},useStroke:function(){this.stroke=!0,this.fillMethod="strokeText",this.styleMethod="strokeStyle"},useFill:function(){this.stroke=!1,this.fillMethod="fillText",this.styleMethod="fillStyle"},updateContext:function(){this.ctx.font=this.font,this.ctx.textAlign=this.align,this.ctx.textBaseline=this.baseline,this.ctx[this.styleMethod]=this.color,this.ctx[this.fillMethod](this.text,this.x,this.y),this._super()},getMeasure:function(){this.ctx.measureText(this.text)}});o.BASELINE=i,t.Text=o}(Joy),function(t){var i=t.DisplayObjectContainer.extend({init:function(t){this._intervals={},this._behaviours=[],this._super(t||{})},bind:function(i,e){var n=t.Behaviour.extend({});n.prototype[i]=e,this.addBehaviour(n)},addBehaviour:function(t){var i=this,e=new t;e.update&&!this._intervals.update&&this.addInterval("update",function(){e.update.apply(i)},100),this._behaviours.push(e)},addInterval:function(t,i,e){this._intervals[t]&&clearInterval(this._intervals[t]),this._intervals[t]=setInterval(i,e)},update:function(){for(var t=0,i=this._behaviours.length;i>t;++t)this._behaviours[t].update.apply(this)}});t.Actor=i}(Joy),function(t){var i=t.Object.extend({init:function(){},collide:function(){}});Joy.Behaviour=i}(Joy),function(t){var i=t.DisplayObjectContainer.extend({init:function(t){t=t||{},this.engine=t.engine,this.shaders=[],this._super(t)},addChild:function(t){t.setContext(this.ctx),this._super(t)},background:function(t){return this.fillStyle(""+t),this.fillRect(0,0,this.engine.width,this.engine.height),this},render:function(){if(this._super(),this.shaders.length>0)for(var t=0,i=this.shaders.length;i>t;++t){var e=this.ctx.getImageData(0,0,this.engine.width,this.engine.height);this.shaders[t].call(this,e),this.ctx.putImageData(e,0,0)}},addShader:function(t){this.shaders.push(t)}});t.Scene=i}(Joy),function(t){var i=t.DisplayObjectContainer.extend({init:function(){for(var t=0,i=arguments.length;i>t;++t)this.addChild(arguments[t])},render:function(){}});t.Parallax=i}(Joy),function(t){var i=null,e=function(t){i=this,this.scenes=[],t.canvas2d&&(this.context=new Joy.Context.Context2d({canvas:t.canvas2d})),t.canvas3d,t.markup&&this.useMarkup(),this.__defineGetter__("width",function(){return this.context.canvas.width}),this.__defineGetter__("height",function(){return this.context.canvas.height}),Joy.debug?(this._lastRenderTime=new Date,this._frameRateText=new Joy.Text({x:4,y:4,font:"12px Verdana",color:"red"}),this.onEnterFrameDebug()):this.onEnterFrame()};e.prototype.createScene=function(){var i=new t.Scene;return this.addScene(i),i},e.prototype.addScene=function(t){t.engine=this,t.setContext(this.context.ctx),Joy.debug&&t.addChild(this._frameRateText),this.scenes.push(t)},e.prototype.render=function(){this.context.render(this.scenes)},e.prototype.useMarkup=function(){var i=new t.Markup;i.analyse(this.context)},e.prototype.onEnterFrame=function(){i.render(),window.onEnterFrame(i.onEnterFrame)},e.prototype.onEnterFrameDebug=function(){var t=new Date;i._frameRateText.text=""+(1e3/(t-i._lastRenderTime)).toFixed(1)+" FPS",i.render(),i._lastRenderTime=t,window.onEnterFrame(i.onEnterFrameDebug)},t.Engine=e}(Joy),function(t){var i=function(t,i,e){this.x=t,this.y=i,this.radius=e};i.prototype.render=function(){},t.Circle=i}(Joy),function(t){var i=function(t){if(this.points=[],t)for(var i=0,e=t.length;e>i;++i)this.addPoint(t[i][0],t[i][1])};i.prototype.addPoint=function(t,i){this.points.push([t,i])},i.prototype.render=function(){},t.Polygon=i}(Joy),function(t){var i=function(t,i){this.width=t||0,this.height=i||0};i.prototype.render=function(t){t.fillRect(0,0,this.width,this.height)},t.Rect=i}(Joy),function(J){var $="undefined"!=typeof Sizzle?Sizzle:null,Markup=function(){};Markup.prototype.analyse=function(t){var i,e,n,s=$("img",t.canvas);for(e=s.length,i=0;e>i;++i)n=this.evaluateDataset.call(s[i],s[i].dataset,t.context),t.addChild(new Joy.Sprite({x:s[i].dataset.x,y:s[i].dataset.y,asset:s[i]}));var h=$("label",t.canvas);for(e=h.length,i=0;e>i;++i)n=this.evaluateDataset(h[i].dataset,t.context),n.text=h[i].innerHTML,t.addChild(new Joy.Text(n))},Markup.prototype.evaluateDataset=function(dataset,context){var attr,matches,width=context.canvas.width,height=context.canvas.height;for(var key in dataset)attr=dataset[key],matches=attr.match(/\{\{([^\}]*)\}\}/),matches&&(dataset[key]=attr.replace(attr,eval(matches[1])));return dataset},J.Markup=Markup}(Joy),function(t){var i=function(){};t.Package=i}(Joy),Joy.Time={deltaTime:1},function(t){var i=function(t,i,e,n){this.value=i||e?n?"rgba("+t+","+i+","+e+","+n+")":"rgb("+t+","+i+","+e+")":t};i.prototype.toString=function(){return this.value},t.Color=i}(Joy),function(t){t.DisplayObject.extend({init:function(){}})}(Joy),function(t){function i(t,i){var n,s,h=e.handlers[t];for(n=0,s=h.length;s>n;++n)h[n].handler.apply(h[n].target,[i])}var e={ENTER:13,SPACE:32,BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMALPOINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145,SEMICOLON:186,EQUALSIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARDSLASH:191,GRAVEACCENT:192,OPENBRACKET:219,BACKSLASH:220,CLOSEBRAKET:221,SINGLEQUOTE:222};t.Events.KEY_DOWN="onkeydown",t.Events.KEY_UP="onkeyup",t.Events.KEY_PRESS="key",e.handlers={},e.timers={},[t.Events.KEY_DOWN,t.Events.KEY_UP,t.Events.KEY_PRESS].forEach(function(i){e.handlers[i]=[],t.Triggerable.register(i,function(t){-1===e.handlers[i].indexOf(t)&&e.handlers[i].push(t)},function(t){var n=e.handlers[i].indexOf(t);-1!==n&&e.handlers[i].splice(n,1)})});var n=1;document.onkeydown=function(s){var h=(s||window.event).keyCode;return e.timers[h]||(i(t.Events.KEY_DOWN,s),i(t.Events.KEY_PRESS,s),0!==n&&(e.timers[h]=setInterval(function(){i(t.Events.KEY_PRESS,s)},n))),!1},document.onkeyup=function(n){var s=(n||window.event).keyCode;s in e.timers&&(i(t.Events.KEY_UP,n),e.timers[s]&&clearInterval(e.timers[s]),delete e.timers[s])},Joy.Keyboard=e}(Joy),function(t){t.Events.CLICK="click",t.Events.DOUBLE_CLICK="dblclick",t.Events.MOUSE_MOVE="mousemove",t.Events.MOUSE_DOWN="mousedown",t.Events.MOUSE_UP="mouseup";var i={};t.Mouse=i}(Joy),function(t){var i=t.DisplayObject.extend({init:function(i){if(!(i.tileset instanceof t.Tileset))throw Error("'tileset' must be given on Tilemap constructor, as Sprite instance.");this._super(i),this.tileset=i.tileset,this.lines=i.lines||1,this.columns=i.columns||1,this.data=i.data},render:function(){for(var t=0,i=this.data.length;i>t;++t)0!==this.data[t]&&this.ctx.drawImage(this.tileset.image,this.tileset.tileWidth*((this.data[t]-1)%this.tileset.columns),this.tileset.tileHeight*((this.data[t]-1)/this.tileset.columns>>0),this.tileset.tileWidth,this.tileset.tileHeight,this.tileset.tileWidth*(t%this.columns),this.tileset.tileHeight*(t/this.columns>>0),this.tileset.tileWidth,this.tileset.tileHeight)}});t.Tilemap=i}(Joy),function(t){var i=t.Sprite.extend({init:function(t){this.tileWidth=t.width,this.tileHeight=t.height,delete t.width,delete t.height,this._super(t)},onLoad:function(){this._super(),this.columns=this._width/this.tileWidth>>0,this.lines=this._height/this.tileHeight>>0}});t.Tileset=i}(Joy),function(t){function i(t){return""!==n&&(t=t.charAt(0).toUpperCase()+t.slice(1)),n+t}var e=navigator.userAgent,n=e.match(/opera/i)&&"o"||e.match(/webkit/i)&&"webkit"||e.match(/msie/i)&&"ms"||e.match(/mozilla/i)&&"moz"||"";t.Support={imageSmoothingEnabled:i("imageSmoothingEnabled")},window.onEnterFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()}(Joy);